# Настройка Яндекс.Карт

## Проблема с автокомплитом адресов

Если вы видите ошибку CORS при использовании автокомплита адресов:
```
Access to XMLHttpRequest at 'https://suggest-maps.yandex.ru/...' has been blocked by CORS policy
```

Это означает, что API ключ настроен неправильно или не для JavaScript API.

## Как получить правильный API ключ

### 1. Перейдите на сайт Яндекс.Разработчика

https://developer.tech.yandex.ru/

### 2. Войдите или зарегистрируйтесь

Используйте аккаунт Яндекс (или создайте новый).

### 3. Создайте ключ для JavaScript API

1. Нажмите **"Получить ключ"** или **"+ Создать ключ API"**
2. Выберите **"JavaScript API и HTTP Геокодер"**
3. Заполните форму:
   - **Название**: Ertis Service Frontend
   - **Сервис**: JavaScript API и HTTP Геокодер
   - **Домены**:
     - `localhost` (для локальной разработки)
     - `ertis-front.vercel.app` (для production)
     - `*.vercel.app` (для preview деплоев)

4. Нажмите **"Создать"**

### 4. Скопируйте ключ

После создания, скопируйте полученный API ключ.

## Куда добавить ключ

### Для локальной разработки:

Создайте или отредактируйте файл `.env.local` в корне проекта:

```bash
NEXT_PUBLIC_API_URL=https://ertis-servise-ertis-service.up.railway.app/api/v1
NEXT_PUBLIC_YANDEX_MAPS_API_KEY=ваш_ключ_здесь
```

⚠️ **ВАЖНО**: Файл `.env.local` НЕ добавляется в git (он в .gitignore)

### Для Vercel (production):

1. Зайдите на https://vercel.com
2. Откройте ваш проект **ertis-front**
3. Перейдите в **Settings** → **Environment Variables**
4. Добавьте переменную:
   - **Name**: `NEXT_PUBLIC_YANDEX_MAPS_API_KEY`
   - **Value**: ваш API ключ
   - **Environment**: Production, Preview, Development (выберите все)
5. Нажмите **Save**
6. Сделайте **Redeploy** проекта:
   - Deployments → последний деплой → три точки → Redeploy

## Проверка

После добавления ключа:

### На странице /create-request:
- ✅ При вводе адреса должны появляться подсказки
- ✅ При клике на подсказку - автоматически заполняются координаты

### На странице /map:
- ✅ Должна отображаться интерактивная карта
- ✅ Маркеры проблем на карте

## Ограничения бесплатного тарифа

Яндекс.Карты бесплатны до определенного лимита:
- **250,000 запросов в месяц** для JavaScript API
- **25,000 запросов в день** для Геокодера

Этого более чем достаточно для вашего проекта.

## Альтернативы (если не хотите использовать Яндекс.Карты)

1. **Google Maps API**
   - Требует кредитную карту
   - Бесплатно до $200 в месяц

2. **Mapbox**
   - Бесплатно до 50,000 запросов в месяц
   - Не требует кредитную карту

3. **OpenStreetMap + Nominatim**
   - Полностью бесплатно
   - Но медленнее и менее точный

## Что будет без API ключа?

- ❌ Автокомплит адресов не работает (CORS ошибка)
- ❌ Карта на /map не загружается (показывается плейсхолдер)
- ✅ Остальной функционал работает нормально
- ✅ Можно вводить адреса вручную
- ✅ Геолокация по браузеру работает (кнопка "Определить местоположение")
